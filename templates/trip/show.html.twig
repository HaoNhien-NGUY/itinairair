{% set enableMorph = true %}

{% extends 'trip/layout.html.twig' %}

{% block sticky_nav %}
    <div class="bg-indigo-50/90 md:bg-white md:border-b border-indigo-100">
        <div class="relative flex overflow-hidden">
            <div {{ stimulus_controller('scrollspy-nav')}}
                data-hs-scrollspy="#scrollspy-days"
                class="hs-scroll-nav-body scroll-p-4 [--scrollspy-offset:200px] flex space-x-1.5 snap-x snap-mandatory overflow-x-auto
                [&::-webkit-scrollbar]:h-0
                md:[&::-webkit-scrollbar]:h-1
                [&::-webkit-scrollbar-track]:bg-transparent
                [&::-webkit-scrollbar-thumb]:bg-indigo-200
                [&::-webkit-scrollbar-thumb]:cursor-grabbing
                [&::-webkit-scrollbar-thumb]:rounded-full">
                {% for day in trip.days %}
                    <a href="#scrollspy-day-{{ day.id }}"
                       class="{{ loop.first ? 'active' }} snap-start hs-scrollspy-active:font-bold hs-scrollspy-active:text-slate-600
                       first-of-type:ml-2 last-of-type:mr-2 hover:bg-slate-100 md:text-nowrap
                       md:py-3 py-2.5 px-2.5 flex justify-center items-center text-sm text-center text-slate-400 font-medium hover:text-slate-600 focus:outline-hidden">
                        {{ day.date|format_datetime(pattern='EEE')|capitalize }} {{ day.date|date('d/m') }}
                    </a>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="pt-2 md:py-6 pb-5 bg-indigo-50/90 md:bg-indigo-50/25">
        <div id="drag-container" class="max-w-7xl container grid grid-cols-1 md:grid-cols-3">
            <div class="md:col-span-2 -mx-4 md:mx-0">
                <twig:PlanningDashboard trip="{{ trip }}" />
                <twig:Trip:Planning :trip="trip" />
            </div>

            <div class="max-md:hidden">
                <div class="space-y-4 px-4 pb-20 sticky top-28 max-h-screen no-scrollbar overflow-y-auto">
                    <twig:Trip:Planning:Stats :trip="trip" />
                    <twig:Trip:Planning:IdeaList :trip="trip" />
                </div>
            </div>
        </div>
    </div>
{% endblock %}
